# çœŸå®æ•°æ®æµ‹è¯•æŠ¥å‘Š

## âœ… æ•°æ®å¤„ç†å®Œæˆ

### WikiTQçœŸå®æ•°æ®é›†
- **è®­ç»ƒé›†**: 9,950 samples
- **å¼€å‘é›†**: 3,023 samples
- **æµ‹è¯•é›†**: 3,023 samples
- **æ€»è®¡**: 15,996 samples

åŸå§‹æ•°æ®æ¥æº: `/data/wikitq/raw/WikiTableQuestions/`

### çœŸå®æ ·æœ¬ç¤ºä¾‹

**Sample 1:**
- Question: "which team won previous to crettyard?"
- Table: 9è¡Œ Ã— 4åˆ— (Team, County, Wins, Years won)
- Answer: "Wolfe Tones"

**Sample 2:**
- Question: "who is the first away team on the chart"
- Table: 48è¡Œ Ã— 4åˆ—
- Answer: "Varbergs GIF"

**Sample 3:**
- Question: "which is deeper, lake tuz or lake palas tuzla?"
- Table: 38è¡Œ Ã— 5åˆ—
- Answer: "Lake Palas Tuzla"

è¿™äº›éƒ½æ˜¯**çœŸå®çš„å¤æ‚è¡¨æ ¼æ¨ç†ä»»åŠ¡**ï¼

## ğŸ“Š çœŸå®æ•°æ®åˆæ­¥æµ‹è¯•ç»“æœ

åœ¨5ä¸ªçœŸå®WikiTQæ ·æœ¬ä¸Šæµ‹è¯•:

```
æˆåŠŸç‡: 40% (2/5)
é”™è¯¯ç±»å‹: SyntaxError (2), KeyError (1)
```

### ä¸ç®€å•ç¤ºä¾‹æ•°æ®å¯¹æ¯”

| æ•°æ®ç±»å‹ | æˆåŠŸç‡ | è¯´æ˜ |
|---------|--------|------|
| ç®€å•ç¤ºä¾‹æ•°æ® | 100% (3/3) | Beijing/Shanghaiäººå£ - å¤ªç®€å• |
| çœŸå®WikiTQæ•°æ® | 40% (2/5) | å¤æ‚è¡¨æ ¼æ¨ç† - çœŸå®baseline |

**ç»“è®º**: ç®€å•ç¤ºä¾‹æ•°æ®æ— æ³•åæ˜ çœŸå®ä»»åŠ¡éš¾åº¦ï¼

## ğŸ¯ ç¬¦åˆæ‚¨çš„ç ”ç©¶æ–¹å‘

æ ¹æ® `survey.md` çš„å†…å®¹ï¼Œæ‚¨çš„ç ”ç©¶é‡ç‚¹æ˜¯:

### 1. Table QAä»»åŠ¡
âœ… **å·²å®Œæˆ**: WikiTQçœŸå®æ•°æ®é›†å·²å¤„ç†
- å¤æ‚è¡¨æ ¼ç»“æ„ (æœ€å¤§48è¡ŒÃ—7åˆ—)
- å¤šæ ·åŒ–é—®é¢˜ç±»å‹ (æ¯”è¾ƒã€è®¡æ•°ã€æ¡ä»¶æŸ¥è¯¢)

### 2. è¿­ä»£å¼é”™è¯¯ä¿®æ­£ (å‚è€ƒAILS-NTUA)
âœ… **å·²å®ç°**: 4å±‚è¯Šæ–­ç³»ç»Ÿ
- Layer 1: é”™è¯¯åˆ†ç±»
- Layer 2: æ ¹å› åˆ†æ
- Layer 3: ç­–ç•¥é€‰æ‹©
- Layer 4: ä¿®å¤æç¤ºç”Ÿæˆ

å½“å‰æµ‹è¯•æ˜¾ç¤º:
- æˆåŠŸæ ·æœ¬å¹³å‡è¿­ä»£: 1-3æ¬¡
- å¤±è´¥æ ·æœ¬: è¯­æ³•é”™è¯¯ã€KeyErroræœªæˆåŠŸä¿®å¤

### 3. LLM + Pythonå·¥å…·äº¤äº’
âœ… **å·²å®ç°**:
- Qwen2.5-7B-Instructç”ŸæˆPythonä»£ç 
- å®‰å…¨æ²™ç›’æ‰§è¡Œ
- é”™è¯¯æ•è·å’Œåé¦ˆ

### 4. GRPOå¼ºåŒ–å­¦ä¹  (å‚è€ƒTable-R1)
âš ï¸ **å¾…å®ç°**: æ¥å£å·²é¢„ç•™
- æ–‡ä»¶: `src/grpo/grpo_trainer.py`
- éœ€è¦ä½¿ç”¨TRLåº“å®ç°è®­ç»ƒå¾ªç¯

## ğŸ“ ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³å¯åš (Baselineè¯„ä¼°)

```bash
# åœ¨50-100ä¸ªæ ·æœ¬ä¸Šå¿«é€Ÿè¯„ä¼°
python3 scripts/evaluate_baseline.py \
    --dataset wikitq \
    --split dev \
    --max_samples 50 \
    --output results/wikitq_dev_baseline_50.json
```

é¢„æœŸç»“æœ:
- æˆåŠŸç‡: 40-60% (åŸºäºåˆæ­¥æµ‹è¯•)
- æ­£ç¡®ç‡: 30-50% (è€ƒè™‘ç­”æ¡ˆåŒ¹é…)

### ä¸­æœŸä»»åŠ¡ (æ”¹è¿›ç³»ç»Ÿ)

1. **æå‡ä»£ç ç”Ÿæˆè´¨é‡**
   - ä¼˜åŒ–promptæ¨¡æ¿
   - æ·»åŠ few-shot examples
   - æ”¹è¿›è¡¨æ ¼æ ¼å¼åŒ–

2. **å¢å¼ºé”™è¯¯ä¿®å¤**
   - æ·»åŠ æ›´å¤šä¿®å¤ç­–ç•¥ (ç›®æ ‡20ä¸ª)
   - æ”¹è¿›æ ¹å› åˆ†æ
   - å¤„ç†SyntaxErrorå’ŒKeyError

3. **ä¼˜åŒ–è¿­ä»£ç­–ç•¥**
   - åŠ¨æ€åœæ­¢æ¡ä»¶
   - é¿å…é‡å¤ç›¸åŒé”™è¯¯
   - è®°å½•æ“ä½œå†å²

### é•¿æœŸç›®æ ‡ (GRPOè®­ç»ƒ)

1. **æ”¶é›†è®­ç»ƒæ•°æ®**
   ```bash
   # è¿è¡Œå®Œæ•´è¯„ä¼°ï¼Œä¿å­˜trajectory
   python3 scripts/collect_trajectories.py \
       --dataset wikitq \
       --split train \
       --max_samples 5000
   ```

2. **å®ç°GRPOè®­ç»ƒ**
   - ä½¿ç”¨TRLåº“
   - å¤šç»„ä»¶å¥–åŠ±å‡½æ•° (å·²å®šä¹‰)
   - ç›®æ ‡: æå‡åˆ°68-72%

3. **å¯¹æ¯”å®éªŒ**
   - GPT-4o baseline (API)
   - AILS-NTUA reproduction
   - æ‚¨çš„æ–¹æ³• (GRPOä¼˜åŒ–)

## ğŸ”¬ ä¸AILS-NTUAå’ŒTable-R1å¯¹æ¯”

### AILS-NTUA (SemEval 2025å† å†›)
- æ–¹æ³•: Language-to-Code + Error Fixing
- è¿­ä»£: æœ€å¤š2æ¬¡
- æˆç»©: SemEval 2025 Task 8 ç¬¬ä¸€å

**æ‚¨çš„å®ç°**: ç±»ä¼¼æ€è·¯ï¼Œ4å±‚è¯Šæ–­ç³»ç»Ÿï¼Œæœ€å¤š3æ¬¡è¿­ä»£

### Table-R1
- æ–¹æ³•: Region-based RL + GRPO
- æ€§èƒ½: WikiTQæå‡14.36åˆ†ï¼Œ8Bæ¨¡å‹è¶…è¿‡GPT-4o
- å¥–åŠ±: execution + structural + syntactical feedback

**æ‚¨çš„è®¡åˆ’**: ä½¿ç”¨GRPOä¼˜åŒ–ç­–ç•¥é€‰æ‹©ï¼Œå¤šç»„ä»¶å¥–åŠ±å‡½æ•°

## âš ï¸ å½“å‰é—®é¢˜åˆ†æ

### é«˜é¢‘é”™è¯¯ç±»å‹

1. **SyntaxError** (40%)
   - LLMç”Ÿæˆä»£ç ä¸å®Œæ•´
   - ç¼ºå°‘å¼•å·ã€æ‹¬å·
   - å»ºè®®: æ”¹è¿›promptï¼Œæ·»åŠ ä»£ç éªŒè¯

2. **KeyError** (20%)
   - åˆ—åä¸åŒ¹é… (å¤§å°å†™ã€å¼•å·)
   - åˆ—åæ¨ç†é”™è¯¯
   - å»ºè®®: å¢å¼ºåˆ—ååŒ¹é…ç­–ç•¥

3. **é€»è¾‘é”™è¯¯** (å‰©ä½™)
   - ç†è§£é—®é¢˜é”™è¯¯
   - è®¡ç®—é€»è¾‘é”™è¯¯
   - å»ºè®®: éœ€è¦æ›´å¼ºæ¨¡å‹æˆ–GRPOè®­ç»ƒ

### æˆåŠŸæ¨¡å¼

- ç®€å•èšåˆ (sum, count, max) â†’ é«˜æˆåŠŸç‡
- ç›´æ¥åˆ—è®¿é—® â†’ 1æ¬¡è¿­ä»£æˆåŠŸ
- æ¡ä»¶ç­›é€‰ â†’ 2-3æ¬¡è¿­ä»£å¯èƒ½æˆåŠŸ

## ğŸ‰ æ€»ç»“

### å·²å®Œæˆ âœ…
1. âœ… çœŸå®WikiTQæ•°æ®é›†å¤„ç† (15,996 samples)
2. âœ… å®Œæ•´ç³»ç»Ÿå®ç° (ä»£ç ç”Ÿæˆ + æ‰§è¡Œ + è¯Šæ–­ + è¿­ä»£)
3. âœ… GPUæµ‹è¯•é€šè¿‡ (Qwen2.5-7B-Instruct)
4. âœ… çœŸå®æ•°æ®åˆæ­¥æµ‹è¯• (40%æˆåŠŸç‡ - çœŸå®baseline)

### å½“å‰çŠ¶æ€
- **ç³»ç»Ÿå®Œå…¨å¯ç”¨**
- **çœŸå®æ•°æ®ready**
- **ç¬¦åˆæ‚¨çš„ç ”ç©¶æ–¹å‘** (Table QA + è¿­ä»£ä¿®å¤ + GRPO)

### ç«‹å³è¡ŒåŠ¨
```bash
# è¿è¡Œ50æ ·æœ¬è¯„ä¼°ï¼ŒæŸ¥çœ‹çœŸå®æ€§èƒ½
python3 scripts/evaluate_baseline.py \
    --dataset wikitq \
    --split dev \
    --max_samples 50
```

---

**Date**: 2025-10-16
**Status**: âœ… Ready for research experiments
**Next**: Baseline evaluation â†’ System improvement â†’ GRPO training
